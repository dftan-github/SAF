# SAF(Ruby General Purpose Super Application Framework)
- 由Ruby言语为主进行程序逻辑控制的RAD级通用目的桌面应用程序框架(2D、3D共存，类似插件式开发，可任意扩充功能。目前是在Windows平台下做测试,其它主要平台应该也是可行的,因为是基于glfw+opengl4.5+自绘方式)
- 支持在无源码、仅依靠文档和Demo的情况下可持续、递进式依葫芦画瓢地进行深度定制开发
- 目标是一个基本五脏俱全的可直接运行的通用程序（最终App既是程序也等同于IDE），使用者可根据自己的需求在许可证权利授权下进行二次深度定制开发
- 以Bytecode的方式分发（黑盒子，最少关注原则，不含源码，相当于在Bin级对App进行修改、扩充、定制功能以及Bug修复） 
- 性能相关的任务交由C++完成
- 使用者不满意的地方都尽量允许有机会进行修改以达到个性化定制改造，一切以用户喜好为准！
- 在运行时进行UI设计，真正所见即所得(目前我所见到的都是设计时进行的UI设计)App可视区内，可任意层级、任意区域放置想要放置的控件，所有这些都是在运行时鼠标配合按键操作完成，基本上零代码
- 基本上统一使用树形结构进行数据组织，方便理解程序逻辑（就像打开资源管理器查看电脑中的各种数据一样）
- 跟ROR一样使用契约式组织源码
- App不会因为既是最终程序又是IDE而变得运行时臃肿（因为除了基础必须，其它的很多都是在运行时需要再加载，类似惰性求值）
- 基于SAF提供的基础及概念，可以预见到它能胜任N多你想要做的任务（除了速度未知，但是基于硬件加速的渲染，效率不会差，目前UI绘制在我的机子上120FPS以上（实际是150FPS上下)
- 基本上每种编程语言都能做相同的任务，但是在SAF理念下，会更轻松、更省事、更高效，会有事半功倍的快感
  
# 初衷
- 解决软件行业以下痛点
  - 每年都有大量新人从学校进入软件行业
    - 新人基本上没有能力制作完整的应用程序，都需要从助理开始沉淀、打磨几年才有能力独立开发
  - 个人工作室
    - 有些能力，但是不想花时间在重建程序上，希望有个现成的可深度定制的通用App,只想写任务相关的代码，尽早交付应用
  - 中小企业
    - 自己研发团队开发App
      - 开发人员流动以及编码没有规范到位，使得经过几代的程序员后，遗留代码因为后来者需要通读框架才好继续，导致难以维护，丢又舍不得，继续维护成本又高，造成这些遗留的代码很可能会变成负资产
    - 委外开发，开发完成后，功能基本定型
      - 后续需要加功能时
        - 自己的Idea，不想经由开发商散布出去
        - 价格谈不拢，原开发商不愿意接单
        - 原开发商有心接单，但是原开发者离职，新人无法接手
      - 使用中发现Bug
        - 只能等待源开发商修复，自己就算有能力也没有途径修复
    - 购买现成的商用软件
      - 使用中发现Bug
        - 只能等待原开发商修复，自己就算有能力也没有途径修复
      - 想加功能
        - 只能依赖原开发商
  - 最终用户
    - 花钱买回来的软件基本上就是定死了功能，自己想要改造都没有途径
    - 运行中发现Bug，只能等开发商修复，自己（或者找第三方）修复都没有机会

# 为什么选择Ruby
- 只有使用过几种以上的编程语言（包含编译型和解释型）的才懂得Ruby的强大，正因为Ruby的强大才让解决以上所讲的行业痛点变得轻松
- 不要担心Ruby的魔幻，因为困难部分已由框架完成，使用者只管用常规方法做事就好
- 也不要担心不少人道听途说的性能问题，Ruby发展到现在，对于很多的应用场景，性能已经不是问题
- 解释型语言没有编译型语言（比如C++)的Coffee time的困扰，基本上是修改->随时运行程序（立等可取）

# 为什么不提供源码
- 因为我们就是尝试、探索在无源码，仅依靠文档和Demo的情况下进行可持续、递进式的程序开发及Bug修复的全新的编程思路
  
# 使用方法
- 下载后
  - 安装ruby
  - 在项目根目录下(存在Gemfile文件)执行bundle install
  - 找到对应Vendors/xxx(开发商)/xxx(项目名)/run.rb
    - 执行(例如) ruby D:\DFTanRepository\Master\Projects\Vendors\DFTan\Meansure\run.rb
  - (后续会在ruby D:\DFTanRepository\Master\Projects\Vendors\DFTan\Meansure\run.rb时根据实际情况自动进行相关依赖的自动安装，省掉过多的手动过程，尽量达到一键运行)

# 计划（展示相关功能及定制、增删、Bug修复方法）
- 制作一个基本功能的影像式测量软件（软仿真）
- 制作一个自动化设备上位机控制软件（软仿真）
- 制作贪食蛇、象棋、纸版游戏
- 制作各种小例子，帮助用户了解定制流程（欢迎提出问题、要求。然后我们来制作Demo）
- 在windows下成熟后，考虑更多的平台

# 目标
- SAF的目标是对标像QT、C++Builder、C#(WinForm)、wxWidgets这些开源或商业级Top级框架，提供同等级的控件数量，内置的绘图及UI布局让编程人员有机会可以轻松的实现类似Autocad这样复杂的大型应用（你只要关注怎样生成新的模型，然后放进内置的Canvas中就可以显示并操控了)对开发者来讲，要实现Autocad这样复杂的应用，谁都希望只做必须做的（比如各种图元、模型的算法）其它的如果工具就能解决那是最好不过了，SAF就是想要实现这样想法的工具，SAF的理念是已经做过的（假定已经稳定）那后续就不用重复已经做过的工作，需要用的时候拿来用就好（这有点像MS的COM模型，只是COM多了跨语言，其余的大多数看起来SAF更好，这得益于ruby的‘鸭子'类型及强大的oo、动态），总结起来就是大家都能做相同的任务，但是SAF对程序员更友好，工作量更少，相对那些对标的Top级框架，SAF在理念是是胜出的（实现相同功能，但是工作量、友好程度都是胜出的）

# 扩展的主要构成
- Cmd(所有命令的基类，程序运行过程中可以根据程序逻辑需要生成多个基于Cmd的类对象，当前活动的Cmd会优先接管键盘、鼠标等事件，自己不处理再在Cmd队列中逐级传递->App->控件)
- Entity(所有图元类的基类，比如EntityPos,EntityLine,EntityArc,EntityCircle)

# 扩展示例
- 比如说你有一个基于SAF的现成的软件（就当是windows下的小画家）之前的画线就是显示一条标准的线段
  现在假定你需要新增除了标准线段之外，在线段的起点和终点各画一条垂直于标准线的垂直线（这个功能在测量行业叫卡尺功能）
  需要实现这个功能，你只需在对应的目录下新建一个EntityLine.rb的文件，内容如下就可以了，其它的你都不需要做了

```ruby {.line-numbers=true}
module SAF
  class EntityLine  
    alias_method :saf_auto, :update_entity
    def update_entity(win)
      auto_super(win)

      primitives.xxx(vertex_format_name: :vnt, draw_type: ::GL::LINES){ 
        #这里的xxx是你自定义的有效的名称（代表新的绘制内容)
      __.ebos.val=[] #在这里按顶点着色器格式填入draw_type对应的两条垂直线的顶点数据就行
     
    }
    end
  end
end

```

# 期望
- 达到桌面版的ROR那样的影响力,让更多的编程爱好者有可用的好工具进行多种应用场景的桌面应用开发 
- 欢迎留言探讨、挑刺、指正，共同进步
- 期待你的关注与参与
  
  
## 许可证
- 个人非商业使用：免费 (MIT许可证)
- 商业使用：需购买商业许可证 (联系dftan@sina.com，1602280505@qq.com)
- 公司、团体内部使用也属于商业使用

